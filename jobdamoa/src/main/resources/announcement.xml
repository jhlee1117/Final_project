<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="announcementns">

	<select id="annList" parameterType="map" resultType="announcement">
		select * from (select a.*, rowNum rn from (select * from announcement) a order by ann_num desc) 
		where rn between #{startRow} and #{endRow}
	</select>
	
	<select id="getTotal" resultType="integer">
		select count(*) from announcement
	</select>
	
	<select id="getMaxNum" resultType="integer">
		select nvl(max(ann_num),0) + 1 from announcement	
	</select>
	
	<insert id="annInsert" parameterType="announcement">
		insert into announcement(ann_num, com_num, ann_job, ann_type, ann_career, ann_recruit_period,
		ann_location, ann_title, ann_view, ann_min, ann_max, ann_contents, ann_qualification, ann_prime )
		 values(#{ann_num}, #{com_num}, #{ann_job}, #{ann_type}, #{ann_career}, #{ann_recruit_period},
		 #{ann_location}, #{ann_title}, 0, #{ann_min}, #{ann_max}, #{ann_contents}, #{ann_qualification}, #{ann_prime})
	</insert>
	
	<update id="updateReadCount" parameterType="integer">
		update announcement set ann_view = ann_view + 1 where ann_num = #{ann_num}
	</update>
	
	<select id="annView" parameterType="integer" resultType="announcement">
		select * from announcement where ann_num = #{ann_num}  
	</select>
	
</mapper>